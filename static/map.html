
<div ng-show = "!navigating" class="top-box">
    <div class="logoDiv">
        <img class="logo" src="img/logo.jpg" alt="">
    </div>
    <input class="search-input" ng-change= "search()" ng-model="query" type="text" name="search" placeholder="Where to? (A30, Starbucks)">
</div>

<!-- Hides search results upon click of "Go" -->
<div ng-hide="navigating" ng-if="show_results" class="search-results">
    <div class="search-result" ng-repeat="result in results | orderBy: ['-s_index', '-time']: true | limitTo: 5 track by $index">
        <div class="icon" ng-switch="result.poi_type">
            <i ng-switch-when="restaurant" class="fa fa-cutlery" aria-hidden="true"></i>
            <i ng-switch-when="gate" class="fa fa-plane" aria-hidden="true"></i>
            <i ng-switch-when="toilet" class="fa fa-male" aria-hidden="true"></i>
            <i ng-switch-when="retail" class="fa fa-shopping-bag" aria-hidden="true"></i>
            <i ng-switch-when="station" class="fa fa-subway" aria-hidden="true"></i>
            <i ng-switch-when="baggage-claim" class="fa fa-suitcase" aria-hidden="true"></i>
            <i ng-switch-when="coffee" class="fa fa-coffee" aria-hidden="true"></i>
            <i ng-switch-when="concourse" class="fa fa-plane" aria-hidden="true"></i>
            <i ng-switch-when="fast_food" class="fa fa-cutlery" aria-hidden="true"></i>
        </div>
        <div class="result">
            <p class="result-name">{{result.name}}</p>
            <p class="result-concourse">Concourse {{result.concourse}}</p>
        </div>
        <div class="time">
            <p>({{result.time}} min)</p>
        </div>
        <div class="go" ng-click="startRoute(result)">
            <p>GO</p>
        </div>
    </div>
</div>
<!-- //Hidden header for displaying step by step directions -->
<div ng-show="navigating" class="top-box">
    <div class="logoDiv">
        <img class="logo" src="img/logo.jpg" alt="">
    </div>
    <div class="stepDiv">{{step_by_step}}</div>
    <div class="logoDiv">
        <i class="fa fa-angle-double-down" style="font-size: 2em; color: lightgray;" aria-hidden="true" ng-click="showSteps()"></i>
    </div>
</div>

<div ng-show="navigating" ng-if="show_steps" class="search-results">
    <div class="search-result" ng-repeat="step in steps track by $index">
        <div class="dot">
            <i ng-show="" class="fa fa-hand-o-right" aria-hidden="true"></i>
            <i ng-hide="" style="font-size: .6em;" class="fa fa-circle" aria-hidden="true"></i>
        </div>
        <div class="step">
                 {{step}}
        </div>
    </div>
</div>


<div class="map-container">
    <leaflet id="map" lf-center="center" defaults="defaults" controls="controls" width="100%"></leaflet>
</div>

<!-- //Hidden footer for displaying time until destination -->
<div class="footer">
    <div ng-show="navigating" class="footer-content">
        <div class="time-nav">23 min </div>
        <div ng-click="stopNav()" class="cancel">Go Back</div>
    </div>
    <div ng-hide="navigating" class="footer-content">
        <div class="homefooter">Welcome to ATL!</div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function (){
        var searchHeight = 0;
        searchHeight = $('.search-box').height();
        var directionsHeight = 0;
        directionsHeight = $('.directions_container').height();
        var footerHeight = 0;
        footerHeight = $('.footer').height();
        var windowWidth = 0;
        windowWidth = $(window).width();
        var windowHeight= 0;
        windowHeight = $(window).height();

        var mapHeight = windowHeight - searchHeight - directionsHeight - footerHeight;
        $(".search-results").css('top', searchHeight);
        $(".search-results").css('max-width',windowWidth);
        $(".map-container").css('height', windowHeight - searchHeight - directionsHeight - foot);
        console.log($('.map-container').height())
        setTimeout(function(){ map.invalidateSize(true)}, 400);
    });
    $(window).resize(function (){
        var searchHeight = 0;
        searchHeight = $('.search-box').height();
        var directionsHeight = 0;
        directionsHeight = $('.directions_container').height();
        var footerHeight = 0;
        footerHeight = $('.footer').height();
        var windowWidth = 0;
        windowWidth = $(window).width();
        var windowHeight= 0;
        windowHeight = $(window).height();

        var mapHeight = windowHeight - searchHeight - directionsHeight - footerHeight;
        $(".search-results").css('top', searchHeight);
        $(".search-results").css('max-width',windowWidth);
        $(".map-container").css('height', windowHeight - searchHeight - directionsHeight - foot);
        console.log($('.map-container').height())
        setTimeout(function(){ map.invalidateSize(true)}, 400);
    });

</script>
